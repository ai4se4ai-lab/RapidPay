<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RQ1/RQ2 Evaluation Results - SATD Chain Visualization</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
        }
        .container { max-width: 1600px; margin: 0 auto; padding: 20px; }
        h1 { 
            color: #00d9ff; 
            text-align: center; 
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .metric-card h3 {
            color: #00d9ff;
            margin-bottom: 15px;
            font-size: 1.2em;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
            padding-bottom: 10px;
        }
        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .metric-label { color: #888; }
        .metric-value { 
            font-weight: bold;
            color: #fff;
        }
        .metric-value.good { color: #4ade80; }
        .metric-value.warning { color: #fbbf24; }
        .metric-value.bad { color: #f87171; }
        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
        }
        .status-passed { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
        .status-failed { background: rgba(248, 113, 113, 0.2); color: #f87171; }
        #cy {
            width: 100%;
            height: 600px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin: 20px 0;
        }
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .ranking-table th, .ranking-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .ranking-table th {
            background: rgba(0, 217, 255, 0.1);
            color: #00d9ff;
        }
        .ranking-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        .sir-bar {
            height: 8px;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RQ1/RQ2 SATD Chain Evaluation Results</h1>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <h3>RQ1: Detection Accuracy</h3>
                <div class="metric-item">
                    <span class="metric-label">Status</span>
                    <span class="status-badge status-failed">
                        NEEDS WORK
                    </span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Precision</span>
                    <span class="metric-value warning">
                        75.0%
                    </span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Recall</span>
                    <span class="metric-value good">
                        90.0%
                    </span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">F1 Score</span>
                    <span class="metric-value">0.818</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">True Positives</span>
                    <span class="metric-value">9</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Chains Detected</span>
                    <span class="metric-value">3</span>
                </div>
            </div>
            
            <div class="metric-card">
                <h3>RQ2: SIR Effectiveness</h3>
                <div class="metric-item">
                    <span class="metric-label">Status</span>
                    <span class="status-badge status-failed">
                        NEEDS WORK
                    </span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Spearman Correlation</span>
                    <span class="metric-value warning">
                        0.400
                    </span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Kendall's Tau</span>
                    <span class="metric-value">0.833</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Top-3 Precision</span>
                    <span class="metric-value good">
                        100.0%
                    </span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Developer Alignment</span>
                    <span class="metric-value">69.4%</span>
                </div>
            </div>
            
            <div class="metric-card">
                <h3>Pipeline Performance</h3>
                <div class="metric-item">
                    <span class="metric-label">SID Duration</span>
                    <span class="metric-value">13ms</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">IRD Duration</span>
                    <span class="metric-value">45ms</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">SIR Duration</span>
                    <span class="metric-value">1ms</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Total SATD Found</span>
                    <span class="metric-value">12</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Relationships Found</span>
                    <span class="metric-value">14</span>
                </div>
            </div>
        </div>
        
        <div class="metric-card">
            <h3>SATD Dependency Graph</h3>
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background:#e41a1c"></div>Design</div>
                <div class="legend-item"><div class="legend-color" style="background:#377eb8"></div>Implementation</div>
                <div class="legend-item"><div class="legend-color" style="background:#4daf4a"></div>Documentation</div>
                <div class="legend-item"><div class="legend-color" style="background:#984ea3"></div>Defect</div>
                <div class="legend-item"><div class="legend-color" style="background:#ff7f00"></div>Test</div>
                <div class="legend-item"><div class="legend-color" style="background:#a65628"></div>Architecture</div>
                <div class="legend-item"><div class="legend-color" style="background:#999"></div>Other/Requirement</div>
            </div>
            <div id="cy"></div>
        </div>
        
        <div class="metric-card">
            <h3>SIR Score Ranking</h3>
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>SATD ID</th>
                        <th>SIR Score</th>
                        <th>Visual</th>
                    </tr>
                </thead>
                <tbody>
                    
                        <tr>
                            <td>#1</td>
                            <td>satd-detected-1</td>
                            <td>1.0000</td>
                            <td><div class="sir-bar" style="width: 100%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#2</td>
                            <td>satd-detected-6</td>
                            <td>1.0000</td>
                            <td><div class="sir-bar" style="width: 100%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#3</td>
                            <td>satd-detected-7</td>
                            <td>1.0000</td>
                            <td><div class="sir-bar" style="width: 100%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#4</td>
                            <td>satd-detected-8</td>
                            <td>1.0000</td>
                            <td><div class="sir-bar" style="width: 100%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#5</td>
                            <td>satd-detected-9</td>
                            <td>1.0000</td>
                            <td><div class="sir-bar" style="width: 100%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#6</td>
                            <td>satd-detected-5</td>
                            <td>0.8638</td>
                            <td><div class="sir-bar" style="width: 86.38211382113822%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#7</td>
                            <td>satd-detected-3</td>
                            <td>0.5081</td>
                            <td><div class="sir-bar" style="width: 50.81300813008131%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#8</td>
                            <td>satd-detected-12</td>
                            <td>0.5081</td>
                            <td><div class="sir-bar" style="width: 50.81300813008131%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#9</td>
                            <td>satd-detected-2</td>
                            <td>0.0000</td>
                            <td><div class="sir-bar" style="width: 0%"></div></td>
                        </tr>
                    
                        <tr>
                            <td>#10</td>
                            <td>satd-detected-4</td>
                            <td>0.0000</td>
                            <td><div class="sir-bar" style="width: 0%"></div></td>
                        </tr>
                    
                </tbody>
            </table>
        </div>
        
        <div class="metric-card">
            <h3>Overall Assessment</h3>
            <p style="font-size: 1.1em; line-height: 1.6; padding: 10px 0;">
                Both detection accuracy and prioritization ranking need improvement.
            </p>
        </div>
    </div>
    
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <script>
        const nodes = [{"id":"satd-detected-1","label":"data_extractor.py:13","file":"data_extractor.py","line":13,"content":"        # TODO: This class is tightly coupled to specific data sources and the\r","debtType":"Architecture","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.747Z"},{"id":"satd-detected-2","label":"data_loader.py:31","file":"data_loader.py","line":31,"content":"        # BUG: Race condition exists when multiple threads call load_data\r","debtType":"Defect","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.749Z"},{"id":"satd-detected-3","label":"data_transformer.py:29","file":"data_transformer.py","line":29,"content":"        # HACK: Using inefficient O(n^2) algorithm for data deduplication.\r","debtType":"Implementation","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.750Z"},{"id":"satd-detected-4","label":"email_sender.py:32","file":"email_sender.py","line":32,"content":"        # HACK: Using blocking I/O for email sending. This blocks the entire\r","debtType":"Implementation","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.751Z"},{"id":"satd-detected-5","label":"notification_service.py:15","file":"notification_service.py","line":15,"content":"        # TODO: No abstraction layer for notification channels. Each sender is\r","debtType":"Architecture","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.752Z"},{"id":"satd-detected-6","label":"payment_gateway.py:15","file":"payment_gateway.py","line":15,"content":"        # TODO: Payment provider is hardcoded to 'stripe'. Need to implement a provider factory\r","debtType":"Design","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.753Z"},{"id":"satd-detected-7","label":"payment_gateway.py:17","file":"payment_gateway.py","line":17,"content":"        # This is a design debt that limits flexibility and requires code changes to switch provider","debtType":"Design","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.753Z"},{"id":"satd-detected-8","label":"payment_gateway.py:42","file":"payment_gateway.py","line":42,"content":"        # Process through hardcoded provider\r","debtType":"Design","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.753Z"},{"id":"satd-detected-9","label":"payment_gateway.py:57","file":"payment_gateway.py","line":57,"content":"        # This method highlights the limitation of the hardcoded design\r","debtType":"Design","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.753Z"},{"id":"satd-detected-10","label":"payment_validator.py:11","file":"payment_validator.py","line":11,"content":"    # TODO: Unit tests are missing for the validation logic. Need to add comprehensive\r","debtType":"Test","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.753Z"},{"id":"satd-detected-11","label":"sms_sender.py:29","file":"sms_sender.py","line":29,"content":"        # NOTE: International SMS support is not implemented yet. Currently only\r","debtType":"Requirement","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.755Z"},{"id":"satd-detected-12","label":"transaction_processor.py:40","file":"transaction_processor.py","line":40,"content":"        # HACK: No retry logic implemented for failed transactions. If the payment\r","debtType":"Implementation","sirScore":0,"sirComponents":{},"createdDate":"2025-11-26T18:42:53.756Z"}];
        const edges = [];
        const chains = [];
        
        const typeColors = {
            'Design': '#e41a1c',
            'Implementation': '#377eb8',
            'Documentation': '#4daf4a',
            'Defect': '#984ea3',
            'Test': '#ff7f00',
            'Architecture': '#a65628',
            'Requirement': '#999',
            'Other': '#999'
        };
        
        const cy = cytoscape({
            container: document.getElementById('cy'),
            elements: {
                nodes: nodes.map(n => ({ data: n })),
                edges: edges.map(e => ({ data: e }))
            },
            style: [
                {
                    selector: 'node',
                    style: {
                        'label': 'data(label)',
                        'background-color': function(ele) {
                            return typeColors[ele.data('debtType')] || '#999';
                        },
                        'width': function(ele) {
                            return 25 + (ele.data('sirScore') * 20);
                        },
                        'height': function(ele) {
                            return 25 + (ele.data('sirScore') * 20);
                        },
                        'font-size': 10,
                        'color': '#fff',
                        'text-outline-color': '#000',
                        'text-outline-width': 1
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        'curve-style': 'bezier',
                        'target-arrow-shape': 'triangle',
                        'width': function(ele) {
                            return ele.data('inChain') ? 3 : 1;
                        },
                        'line-color': function(ele) {
                            return ele.data('inChain') ? '#00d9ff' : '#666';
                        },
                        'target-arrow-color': function(ele) {
                            return ele.data('inChain') ? '#00d9ff' : '#666';
                        }
                    }
                }
            ],
            layout: {
                name: 'cose',
                padding: 50,
                nodeRepulsion: 8000,
                idealEdgeLength: 100
            }
        });
    </script>
</body>
</html>