{
  "metadata": {
    "description": "Ground truth data for RQ1 and RQ2 evaluation of RapidPay SATD detection",
    "version": "1.0",
    "created": "2024-01-01",
    "total_satd_instances": 10,
    "total_chains": 3,
    "total_relationships": 9
  },
  "satd_instances": [
    {
      "id": "satd-1",
      "file": "payment_gateway.py",
      "line": 18,
      "pattern": "TODO",
      "content": "TODO: Payment provider is hardcoded to 'stripe'. Need to implement a provider factory pattern to support multiple payment providers (PayPal, Square, etc.) dynamically.",
      "debt_type": "Design",
      "severity": "high",
      "description": "Hardcoded payment provider limits flexibility and requires code changes to switch providers",
      "containing_function": "__init__",
      "containing_class": "PaymentGateway"
    },
    {
      "id": "satd-2",
      "file": "transaction_processor.py",
      "line": 40,
      "pattern": "HACK",
      "content": "HACK: No retry logic implemented for failed transactions. If the payment provider times out or returns a transient error, we just fail immediately.",
      "debt_type": "Implementation",
      "severity": "high",
      "description": "Missing retry mechanism causes unnecessary transaction failures",
      "containing_function": "validate_and_process",
      "containing_class": "TransactionProcessor"
    },
    {
      "id": "satd-3",
      "file": "payment_validator.py",
      "line": 10,
      "pattern": "TODO",
      "content": "TODO: Unit tests are missing for the validation logic. Need to add comprehensive test coverage for edge cases like currency conversion, amount limits, and customer verification.",
      "debt_type": "Test",
      "severity": "medium",
      "description": "Missing test coverage may hide validation bugs",
      "containing_function": null,
      "containing_class": "PaymentValidator"
    },
    {
      "id": "satd-4",
      "file": "receipt_generator.py",
      "line": 8,
      "pattern": "FIXME",
      "content": "FIXME: This API is completely undocumented. The generate_receipt method parameters, return format, and error handling are not documented anywhere.",
      "debt_type": "Documentation",
      "severity": "low",
      "description": "Undocumented API makes it difficult for developers to use correctly",
      "containing_function": null,
      "containing_class": "ReceiptGenerator"
    },
    {
      "id": "satd-5",
      "file": "data_extractor.py",
      "line": 14,
      "pattern": "TODO",
      "content": "TODO: This class is tightly coupled to specific data sources and the DataTransformer class. Should implement a plugin architecture or dependency injection.",
      "debt_type": "Architecture",
      "severity": "high",
      "description": "Tight coupling prevents testing in isolation and component swapping",
      "containing_function": "__init__",
      "containing_class": "DataExtractor"
    },
    {
      "id": "satd-6",
      "file": "data_transformer.py",
      "line": 27,
      "pattern": "HACK",
      "content": "HACK: Using inefficient O(n^2) algorithm for data deduplication. This works fine for small datasets but will cause severe performance issues when processing large volumes.",
      "debt_type": "Implementation",
      "severity": "high",
      "description": "Inefficient algorithm causes performance degradation at scale",
      "containing_function": "transform",
      "containing_class": "DataTransformer"
    },
    {
      "id": "satd-7",
      "file": "data_loader.py",
      "line": 29,
      "pattern": "BUG",
      "content": "BUG: Race condition exists when multiple threads call load_data simultaneously. The lock doesn't properly protect the batch processing.",
      "debt_type": "Defect",
      "severity": "critical",
      "description": "Race condition can cause duplicate records or data loss",
      "containing_function": "load_data",
      "containing_class": "DataLoader"
    },
    {
      "id": "satd-8",
      "file": "notification_service.py",
      "line": 14,
      "pattern": "TODO",
      "content": "TODO: No abstraction layer for notification channels. Each sender is directly instantiated here. Should implement a NotificationChannel interface.",
      "debt_type": "Design",
      "severity": "medium",
      "description": "Poor design makes it hard to add new channels or mock for testing",
      "containing_function": "__init__",
      "containing_class": "NotificationService"
    },
    {
      "id": "satd-9",
      "file": "email_sender.py",
      "line": 30,
      "pattern": "HACK",
      "content": "HACK: Using blocking I/O for email sending. This blocks the entire thread while waiting for SMTP server response.",
      "debt_type": "Implementation",
      "severity": "medium",
      "description": "Blocking I/O causes thread starvation under load",
      "containing_function": "send_email",
      "containing_class": "EmailSender"
    },
    {
      "id": "satd-10",
      "file": "sms_sender.py",
      "line": 29,
      "pattern": "NOTE",
      "content": "NOTE: International SMS support is not implemented yet. Currently only supports US and CA phone numbers.",
      "debt_type": "Requirement",
      "severity": "medium",
      "description": "Incomplete feature limits international user support",
      "containing_function": "send_sms",
      "containing_class": "SMSSender"
    }
  ],
  "relationships": [
    {
      "id": "rel-1",
      "source_satd": "satd-1",
      "target_satd": "satd-2",
      "type": "call",
      "weight": 0.8,
      "hops": 1,
      "description": "PaymentGateway calls TransactionProcessor.validate_and_process()",
      "chain_id": "chain-A"
    },
    {
      "id": "rel-2",
      "source_satd": "satd-2",
      "target_satd": "satd-3",
      "type": "call",
      "weight": 0.8,
      "hops": 1,
      "description": "TransactionProcessor calls PaymentValidator.validate_payment()",
      "chain_id": "chain-A"
    },
    {
      "id": "rel-3",
      "source_satd": "satd-2",
      "target_satd": "satd-4",
      "type": "call",
      "weight": 0.7,
      "hops": 1,
      "description": "TransactionProcessor calls ReceiptGenerator.generate_receipt()",
      "chain_id": "chain-A"
    },
    {
      "id": "rel-4",
      "source_satd": "satd-5",
      "target_satd": "satd-6",
      "type": "module",
      "weight": 0.9,
      "hops": 1,
      "description": "DataExtractor imports and uses DataTransformer",
      "chain_id": "chain-B"
    },
    {
      "id": "rel-5",
      "source_satd": "satd-6",
      "target_satd": "satd-7",
      "type": "call",
      "weight": 0.8,
      "hops": 1,
      "description": "DataTransformer calls DataLoader.load_data()",
      "chain_id": "chain-B"
    },
    {
      "id": "rel-6",
      "source_satd": "satd-5",
      "target_satd": "satd-7",
      "type": "data",
      "weight": 0.6,
      "hops": 2,
      "description": "Data flows from DataExtractor through DataTransformer to DataLoader",
      "chain_id": "chain-B"
    },
    {
      "id": "rel-7",
      "source_satd": "satd-8",
      "target_satd": "satd-9",
      "type": "module",
      "weight": 0.9,
      "hops": 1,
      "description": "NotificationService imports and uses EmailSender",
      "chain_id": "chain-C"
    },
    {
      "id": "rel-8",
      "source_satd": "satd-8",
      "target_satd": "satd-10",
      "type": "module",
      "weight": 0.9,
      "hops": 1,
      "description": "NotificationService imports and uses SMSSender",
      "chain_id": "chain-C"
    },
    {
      "id": "rel-9",
      "source_satd": "satd-9",
      "target_satd": "satd-10",
      "type": "control",
      "weight": 0.5,
      "hops": 2,
      "description": "Both senders are controlled by the same notification flow",
      "chain_id": "chain-C"
    }
  ],
  "chains": [
    {
      "id": "chain-A",
      "name": "Payment Processing Chain",
      "nodes": ["satd-1", "satd-2", "satd-3", "satd-4"],
      "length": 4,
      "description": "Chain of SATD instances in the payment processing pipeline",
      "root_node": "satd-1",
      "leaf_nodes": ["satd-3", "satd-4"],
      "total_weight": 2.3,
      "expected_max_sir": "satd-1"
    },
    {
      "id": "chain-B",
      "name": "Data Pipeline Chain",
      "nodes": ["satd-5", "satd-6", "satd-7"],
      "length": 3,
      "description": "Chain of SATD instances in the ETL data pipeline",
      "root_node": "satd-5",
      "leaf_nodes": ["satd-7"],
      "total_weight": 2.3,
      "expected_max_sir": "satd-5"
    },
    {
      "id": "chain-C",
      "name": "Notification System Chain",
      "nodes": ["satd-8", "satd-9", "satd-10"],
      "length": 3,
      "description": "Chain of SATD instances in the notification system",
      "root_node": "satd-8",
      "leaf_nodes": ["satd-9", "satd-10"],
      "total_weight": 2.3,
      "expected_max_sir": "satd-8"
    }
  ],
  "expected_sir_ranking": {
    "description": "Expected ranking of SATD instances by SIR score (highest impact first)",
    "ranking": [
      {
        "rank": 1,
        "satd_id": "satd-1",
        "rationale": "Root of longest chain (4 nodes), high fanout (1 outgoing), high reachability (3 nodes)"
      },
      {
        "rank": 2,
        "satd_id": "satd-5",
        "rationale": "Root of chain B, tight coupling propagates issues to transformer and loader"
      },
      {
        "rank": 3,
        "satd_id": "satd-8",
        "rationale": "Root of chain C, poor design affects all notification channels"
      },
      {
        "rank": 4,
        "satd_id": "satd-2",
        "rationale": "Middle of chain A with 2 outgoing edges, retry issues affect downstream"
      },
      {
        "rank": 5,
        "satd_id": "satd-6",
        "rationale": "Middle of chain B, inefficiency affects data loader performance"
      },
      {
        "rank": 6,
        "satd_id": "satd-7",
        "rationale": "Critical defect but leaf node with no outgoing dependencies"
      },
      {
        "rank": 7,
        "satd_id": "satd-9",
        "rationale": "Implementation issue affects email sending, connected to SMS via control flow"
      },
      {
        "rank": 8,
        "satd_id": "satd-10",
        "rationale": "Leaf node, incomplete feature has limited propagation impact"
      },
      {
        "rank": 9,
        "satd_id": "satd-3",
        "rationale": "Leaf node in chain A, test debt is self-contained"
      },
      {
        "rank": 10,
        "satd_id": "satd-4",
        "rationale": "Leaf node in chain A, documentation debt has minimal propagation"
      }
    ],
    "top_3_severity": ["satd-7", "satd-1", "satd-2", "satd-5", "satd-6"],
    "developer_priority_expectation": {
      "description": "Expected developer prioritization based on severity and impact",
      "high_priority": ["satd-7", "satd-1", "satd-5"],
      "medium_priority": ["satd-2", "satd-6", "satd-8", "satd-9"],
      "low_priority": ["satd-3", "satd-10", "satd-4"]
    }
  },
  "evaluation_metrics": {
    "rq1_detection": {
      "description": "Metrics for evaluating SATD detection accuracy (RQ1)",
      "expected_precision_threshold": 0.8,
      "expected_recall_threshold": 0.9,
      "chain_accuracy_threshold": 0.85,
      "relationship_identification_threshold": 0.7
    },
    "rq2_prioritization": {
      "description": "Metrics for evaluating SIR scoring effectiveness (RQ2)",
      "spearman_correlation_threshold": 0.6,
      "top_3_precision_threshold": 0.67,
      "kendall_tau_threshold": 0.5
    }
  }
}

